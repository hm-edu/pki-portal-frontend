{"components":{"schemas":{"echo.HTTPError":{"properties":{"message":{}},"type":"object"},"model.CsrRequest":{"properties":{"csr":{"type":"string"}},"required":["csr"],"type":"object"},"model.RevokeRequest":{"properties":{"reason":{"type":"string"},"serial":{"type":"string"}},"required":["reason","serial"],"type":"object"},"portal_apis.ListSmimeResponse_CertificateDetails":{"properties":{"expires":{"$ref":"#/components/schemas/timestamppb.Timestamp"},"id":{"type":"integer"},"serial":{"type":"string"},"status":{"type":"string"}},"type":"object"},"portal_apis.SslCertificateDetails":{"properties":{"common_name":{"type":"string"},"created":{"$ref":"#/components/schemas/timestamppb.Timestamp"},"expires":{"$ref":"#/components/schemas/timestamppb.Timestamp"},"id":{"type":"integer"},"issued_by":{"type":"string"},"not_before":{"$ref":"#/components/schemas/timestamppb.Timestamp"},"serial":{"type":"string"},"source":{"type":"string"},"status":{"type":"string"},"subject_alternative_names":{"items":{"type":"string"},"type":"array"}},"type":"object"},"timestamppb.Timestamp":{"properties":{"nanos":{"description":"Non-negative fractions of a second at nanosecond resolution. Negative\nsecond values with fractions must still have non-negative nanos values\nthat count forward in time. Must be from 0 to 999,999,999\ninclusive.","type":"integer"},"seconds":{"description":"Represents seconds of UTC time since Unix epoch\n1970-01-01T00:00:00Z. Must be from 0001-01-01T00:00:00Z to\n9999-12-31T23:59:59Z inclusive.","type":"integer"}},"type":"object"}},"securitySchemes":{"API":{"bearerFormat":"JWT","scheme":"bearer","type":"http"}}},"info":{"contact":{"name":"Source Code","url":"https://github.com/hm-edu/portal-backend"},"description":"Go microservice for PKI management. Provides an wrapper above the sectigo API.","license":{"name":"Apache License","url":"https://github.com/hm-edu/portal-backend/blob/main/LICENSE"},"title":"PKI Service","version":"2.0"},"openapi":"3.0.3","paths":{"/smime/":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/portal_apis.ListSmimeResponse_CertificateDetails"},"type":"array"}}},"description":"certificates"},"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/echo.HTTPError"}}},"description":"Error processing the request"}},"security":[{"API":[]}],"summary":"SMIME List Endpoint","tags":["SMIME"]}},"/smime/csr":{"post":{"description":"This endpoint handles a provided CSR. The validity of the CSR is checked and passed to the sectigo server in combination with the basic user information extracted from the JWT.\nThe server uses his own configuration, so the profile and the lifetime of the certificate can not be modified.\nAfterwards the new certificate is returned as X509 certificate.","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/model.CsrRequest"}}},"description":"The CSR","required":true,"x-originalParamName":"csr"},"responses":{"200":{"content":{"application/json":{"schema":{"type":"string"}}},"description":"certificate"},"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/echo.HTTPError"}}},"description":"Error processing the request"}},"security":[{"API":[]}],"summary":"SMIME CSR Endpoint","tags":["SMIME"]}},"/smime/revoke":{"post":{"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/model.RevokeRequest"}}},"description":"The serial of the certificate to revoke and the reason","required":true,"x-originalParamName":"request"},"responses":{"204":{"description":""},"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/echo.HTTPError"}}},"description":"Error processing the request"}},"security":[{"API":[]}],"summary":"SMIME Revoke Endpoint","tags":["SMIME"]}},"/ssl/":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/portal_apis.SslCertificateDetails"},"type":"array"}}},"description":"Certificates"},"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/echo.HTTPError"}}},"description":"Error processing the request"}},"security":[{"API":[]}],"summary":"SSL List Endpoint","tags":["SSL"]}},"/ssl/csr":{"post":{"description":"This endpoint handles a provided CSR. The validity of the CSR is checked and passed to the sectigo server.","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/model.CsrRequest"}}},"description":"The CSR","required":true,"x-originalParamName":"csr"},"responses":{"200":{"content":{"application/json":{"schema":{"type":"string"}}},"description":"certificate"},"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/echo.HTTPError"}}},"description":"Error processing the request"}},"security":[{"API":[]}],"summary":"SSL CSR Endpoint","tags":["SSL"]}},"/ssl/revoke":{"post":{"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/model.RevokeRequest"}}},"description":"The serial of the certificate to revoke and the reason","required":true,"x-originalParamName":"request"},"responses":{"204":{"description":""},"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/echo.HTTPError"}}},"description":"Error processing the request"}},"security":[{"API":[]}],"summary":"SSL Revoke Endpoint","tags":["SSL"]}},"/whoami":{"get":{"description":"Returns the username of the logged in user","responses":{"200":{"content":{"application/json":{"schema":{"type":"string"}}},"description":"Username"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/echo.HTTPError"}}},"description":"Bad Request"}},"security":[{"API":[]}],"summary":"whoami Endpoint","tags":["User"]}}}}
